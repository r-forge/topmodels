<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Procast: Probabilistic Forecasting — procast • topmodels</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Procast: Probabilistic Forecasting — procast"><meta property="og:description" content="Generic function and methods for computing various kinds of probabilistic
forecasts from (regression) models."><meta property="og:image" content="https://topmodels.R-Forge.R-project.org/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@AchimZeileis"><meta name="twitter:site" content="@AchimZeileis"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">topmodels</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/topmodels.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/goodness_of_fit.html">Goodness of Fit of Probabilistic Regression Models</a>
    </li>
    <li>
      <a href="../articles/graphics.html">Graphics for Assessing Goodness of Fit</a>
    </li>
    <li>
      <a href="../articles/illustration_fifa_2018.html">Illustration: Goals in the 2018 FIFA World Cup</a>
    </li>
    <li>
      <a href="../articles/illustration_rain_ibk.html">Illustration: Precipitation Forecasts in Innsbruck</a>
    </li>
    <li>
      <a href="../articles/illustration_artificial.html">Illustration: Artificial Data</a>
    </li>
    <li>
      <a href="../articles/implementation.html">Implementation Overview</a>
    </li>
    <li>
      <a href="../articles/procast.html">Probabilistic Forecasting Infrastructure</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Procast: Probabilistic Forecasting</h1>
    
    <div class="hidden name"><code>procast.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generic function and methods for computing various kinds of probabilistic
forecasts from (regression) models.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">procast</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.pass</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"distribution"</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">procast</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.pass</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"distribution"</span>, <span class="st">"mean"</span>, <span class="st">"variance"</span>, <span class="st">"quantile"</span>, <span class="st">"probability"</span>, <span class="st">"density"</span>,</span>
<span>    <span class="st">"loglikelihood"</span>, <span class="st">"parameters"</span>, <span class="st">"kurtosis"</span>, <span class="st">"skewness"</span><span class="op">)</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for lm</span></span>
<span><span class="fu">procast</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.pass</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"distribution"</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  sigma <span class="op">=</span> <span class="st">"ML"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for glm</span></span>
<span><span class="fu">procast</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.pass</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"distribution"</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  dispersion <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for bamlss</span></span>
<span><span class="fu">procast</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.pass</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"distribution"</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  distributions3 <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for disttree</span></span>
<span><span class="fu">procast</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.pass</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"distribution"</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  distributions3 <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>a fitted model object. For the <code>default</code> method this
needs to have a <code><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></code> method (or <code>object</code>
can inherit from <code>distribution</code> directly).</p></dd>


<dt>newdata</dt>
<dd><p>optionally, a data frame in which to look for variables with
which to predict. If omitted, the original observations are used.</p></dd>


<dt>na.action</dt>
<dd><p>function determining what should be done with missing
values in <code>newdata</code>.  The default is to employ <code>NA</code>.</p></dd>


<dt>type</dt>
<dd><p>character specifying the type of probabilistic forecast to
compute. Note that <code>type = "probability"</code> corresponds to cumulative
probability as in <code>pnorm</code>, <code>pbinom</code>, etc.</p></dd>


<dt>at</dt>
<dd><p>specification of values at which the forecasts should be
evaluated, typically a numeric vector but possibly also a matrix or data
frame.  Additionally, <code>at</code> can be the character string
<code>"function"</code> or <code>"list"</code>, see details below.</p></dd>


<dt>drop</dt>
<dd><p>logical. Should forecasts be returned in a data frame (default)
or (if possible) dropped to a vector, see return value description below.</p></dd>


<dt>...</dt>
<dd><p>further parameters passed to methods. In particular, this includes
the logical argument <code>elementwise = NULL</code>. Should each element of distribution only be evaluated at the
corresponding element of <code>at</code> (<code>elementwise = TRUE</code>) or at all elements
in <code>at</code> (<code>elementwise = FALSE</code>). Elementwise evaluation is only possible
if the number of observations is length of <code>at</code> are the same and in that case a vector of
the same length is returned. Otherwise a matrix is returned. The default is to use
<code>elementwise = TRUE</code> if possible, and otherwise <code>elementwise = FALSE</code>.</p></dd>


<dt>sigma</dt>
<dd><p>character or numeric or <code>NULL</code>. Specification of the standard
deviation <code>sigma</code> to be used for the <code><a href="https://alexpghayes.github.io/distributions3/reference/Normal.html" class="external-link">Normal</a></code> distribution in the
<code>lm</code> method. The default <code>"ML"</code> (or equivalently <code>"MLE"</code> or <code>NULL</code>)
uses the maximum likelihood estimate based on the residual sum of squares divided
by the number of observations, n. Alternatively, <code>sigma = "OLS"</code> uses the
least-squares estimate (divided by the residual degrees of freedom, n - k). Finally,
a concrete numeric value can also be specified in <code>sigma</code>.</p></dd>


<dt>dispersion</dt>
<dd><p>character or numeric or <code>NULL</code>. Specification of the
dispersion parameter in the <code>glm</code> method. The default <code>NULL</code>
(or equivalently <code>"deviance"</code>) is to use the <code><a href="https://rdrr.io/r/stats/deviance.html" class="external-link">deviance</a></code>
divided by the number of observations, n. Alternatively, <code>dispersion = "Chisquared"</code>
uses the Chi-squared statistic divided by the residual degrees of freedom, n - k.
Finally, a concrete numeric value can also be specified in <code>dispersion</code>.</p></dd>


<dt>distributions3</dt>
<dd><p>logical. If a dedicated <span class="pkg">distributions3</span> object
is available (e.g., such as <code><a href="https://alexpghayes.github.io/distributions3/reference/Normal.html" class="external-link">Normal</a></code>) and uses
the same parameterization, should this be used instead of the general
<code>disttree</code> distribution?</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Either a <code>data.frame</code> of predictions with the same number of rows
as the <code>newdata</code> (or the original observations if that is <code>NULL</code>).
If <code>drop = TRUE</code> predictions with just a single column are simplified
to a vector and predictions with multiple columns to a matrix.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The function <code>procast</code> provides a unified framework for probabilistic
forcasting (or procasting, for short) based on probabilistic (regression)
models, also known as distributional regression approaches. Typical types
of predictions include quantiles, probabilities, (conditional) expectations,
variances, and (log-)densities. Internally, <code>procast</code> methods typically
compute the predicted parameters for each observation and then compute the
desired outcome for the distributions with the respective parameters.</p>
<p>Some quantities, e.g., the moments of the distribution (like mean or variance),
can be computed directly from the predicted parameters of the
distribution while others require an additional argument <code>at</code> which the
distribution is evaluated (e.g., the probability of a quantile or an
observation of the response).</p>
<p>The default <code>procast</code> method leverages the S3 classes and methods for
probability distributions from the <span class="pkg">distributions3</span> package. In a first step
the predicted probability distribution object is obtained and, by default
(<code>type = "distribution"</code>), returned in order to reflect the distributional
nature of the forecast. For all other <code>type</code>s (e.g., <code>"mean"</code>,
<code>"quantile"</code>, or <code>"density"</code>), the corresponding extractor methods
(e.g., <code>mean</code>, <code>quantile</code>, or <code><a href="https://alexpghayes.github.io/distributions3/reference/pdf.html" class="external-link">pdf</a></code>) are used to
compute the desired quantity from the distribution objects. The examples
provide some worked illustrations.</p>
<p>Package authors or users, who want to enable <code>procast</code> for new types
of model objects, only need to provide a suitable <code><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></code>
extractor for the predicted probability distribution. Then the default <code>procast</code>
works out of the box. However, if the <span class="pkg">distributions3</span> package does not support
the necessary probability distribution, then it may also be necessary to
implement a new distribution objects, see <code><a href="https://alexpghayes.github.io/distributions3/reference/apply_dpqr.html" class="external-link">apply_dpqr</a></code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## load packages</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://topmodels.R-Forge.R-project.org/">"topmodels"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/alexpghayes/distributions3" class="external-link">"distributions3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Poisson regression model for FIFA 2018 data:</span></span></span>
<span class="r-in"><span><span class="co">## number of goals scored by each team in each game, explained by</span></span></span>
<span class="r-in"><span><span class="co">## predicted ability difference of the competing teams</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"FIFA2018"</span>, package <span class="op">=</span> <span class="st">"distributions3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">goals</span> <span class="op">~</span> <span class="va">difference</span>, data <span class="op">=</span> <span class="va">FIFA2018</span>, family <span class="op">=</span> <span class="va">poisson</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## predicted probability distributions for all matches (in sample)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                distribution</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Poisson distribution (lambda = 1.7680273)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Poisson distribution (lambda = 0.8655224)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Poisson distribution (lambda = 1.0296663)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Poisson distribution (lambda = 1.4861779)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Poisson distribution (lambda = 1.4353952)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Poisson distribution (lambda = 1.0660948)</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.7680)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 0.8655)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.0297)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.4862)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.4354)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.0661)" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## procasts for new data</span></span></span>
<span class="r-in"><span><span class="co">## much lower, equal, and much higher ability than opponent</span></span></span>
<span class="r-in"><span><span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>difference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## predicted goal distribution object</span></span></span>
<span class="r-in"><span><span class="va">goals</span> <span class="op">&lt;-</span> <span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">goals</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 0.8181)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.2370)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Poisson distribution (lambda = 1.8704)" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## predicted densities/probabilities for scoring 0, 1, ..., 5 goals</span></span></span>
<span class="r-in"><span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span>, type <span class="op">=</span> <span class="st">"density"</span>, at <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         d_0       d_1       d_2        d_3         d_4         d_5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.4412492 0.3610060 0.1476777 0.04027394 0.008237485 0.001347892</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2902421 0.3590411 0.2220740 0.09157147 0.028319386 0.007006441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.1540605 0.2881563 0.2694852 0.16801593 0.078564672 0.029389630</span>
<span class="r-in"><span><span class="co">## by hand</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/pdf.html" class="external-link">pdf</a></span><span class="op">(</span><span class="va">goals</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         d_0       d_1       d_2        d_3         d_4         d_5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.4412492 0.3610060 0.1476777 0.04027394 0.008237485 0.001347892</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2902421 0.3590411 0.2220740 0.09157147 0.028319386 0.007006441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.1540605 0.2881563 0.2694852 0.16801593 0.078564672 0.029389630</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## means and medians</span></span></span>
<span class="r-in"><span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span>, type <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.8181454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.2370397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1.8704100</span>
<span class="r-in"><span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span>, type <span class="op">=</span> <span class="st">"quantile"</span>, at <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   quantile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        2</span>
<span class="r-in"><span><span class="co">## by hand</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">goals</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1         2         3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.8181454 1.2370397 1.8704100 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">goals</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1 2 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## evaluate procast elementwise or for all possible combinations</span></span></span>
<span class="r-in"><span><span class="co">## of distributions from 'nd' and observations in 'at'</span></span></span>
<span class="r-in"><span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span>, type <span class="op">=</span> <span class="st">"probability"</span>, at <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, elementwise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   probability</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.8022553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.8713572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   0.8797179</span>
<span class="r-in"><span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span>, type <span class="op">=</span> <span class="st">"probability"</span>, at <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, elementwise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         p_1       p_2       p_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.8022553 0.9499330 0.9902069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.6492832 0.8713572 0.9629287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.4422167 0.7117019 0.8797179</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## compute in-sample log-likelihood sum via procast</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu">procast</span><span class="op">(</span><span class="va">m</span>, type <span class="op">=</span> <span class="st">"density"</span>, at <span class="op">=</span> <span class="va">FIFA2018</span><span class="op">$</span><span class="va">goals</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -177.6971</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/logLik.html" class="external-link">logLik</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'log Lik.' -177.6971 (df=2)</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Achim Zeileis, Moritz N. Lang, Reto Stauffer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

