<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extracting Fitted or Predicted Probability Distributions from bamlss Models — prodist.bamlss • topmodels</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Extracting Fitted or Predicted Probability Distributions from bamlss Models — prodist.bamlss"><meta property="og:description" content="Methods for bamlss model objects for extracting
fitted (in-sample) or predicted (out-of-sample) probability distribution
objects."><meta property="og:image" content="https://topmodels.R-Forge.R-project.org/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@MoritzNLang"><meta name="twitter:site" content="@MoritzNLang"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">topmodels</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/topmodels.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/goodness_of_fit.html">Goodness of Fit of Probabilistic Regression Models</a>
    </li>
    <li>
      <a href="../articles/graphics.html">Graphics for Assessing Goodness of Fit</a>
    </li>
    <li>
      <a href="../articles/illustration_fifa_2018.html">Illustration: Goals in the 2018 FIFA World Cup</a>
    </li>
    <li>
      <a href="../articles/illustration_rain_ibk.html">Illustration: Precipitation Forecasts in Innsbruck</a>
    </li>
    <li>
      <a href="../articles/illustration_artificial.html">Illustration: Artificial Data</a>
    </li>
    <li>
      <a href="../articles/implementation.html">Implementation Overview</a>
    </li>
    <li>
      <a href="../articles/procast.html">Probabilistic Forecasting Infrastructure</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extracting Fitted or Predicted Probability Distributions from bamlss Models</h1>
    
    <div class="hidden name"><code>prodist.bamlss.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Methods for <span class="pkg">bamlss</span> model objects for extracting
fitted (in-sample) or predicted (out-of-sample) probability distribution
objects.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for bamlss</span></span>
<span><span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span>, distributions3 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>A model object of class <code><a href="http://www.bamlss.org/reference/bamlss.html" class="external-link">bamlss</a></code>.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="http://www.bamlss.org/reference/predict.bamlss.html" class="external-link">predict.bamlss</a></code>, 
e.g., <code>newdata</code>.</p></dd>


<dt>distributions3</dt>
<dd><p>logical. If a dedicated <span class="pkg">distributions3</span> object
is available (e.g., such as <code><a href="https://alexpghayes.github.io/distributions3/reference/Normal.html" class="external-link">Normal</a></code>) and uses
the same parameterization, should this be used instead of the general
<code>BAMLSS</code> distribution?</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object inheriting from <code>distribution</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>To facilitate making probabilistic forecasts based on <code><a href="http://www.bamlss.org/reference/bamlss.html" class="external-link">bamlss</a></code>
model objects, the <code><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></code> method extracts fitted or
predicted probability <code>distribution</code> objects. Internally, the
<code><a href="http://www.bamlss.org/reference/predict.bamlss.html" class="external-link">predict.bamlss</a></code> method from the <span class="pkg">bamlss</span> package is
used first to obtain the distribution parameters. Subsequently, the corresponding <code>distribution</code>
object is set up using <code><a href="BAMLSS.html">BAMLSS</a></code>, enabling the workflow provided by
the <span class="pkg">distributions3</span> package.</p>
<p>Note that these probability distributions only reflect the random variation in
the dependent variable based on the model employed (and its associated
distributional assumption for the dependent variable). This does not capture
the uncertainty in the parameter estimates.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="BAMLSS.html">BAMLSS</a></code> <code><a href="http://www.bamlss.org/reference/predict.bamlss.html" class="external-link">predict.bamlss</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"bamlss"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"_R_CHECK_PACKAGE_NAME_"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"not all packages required for the example are installed"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/quit.html" class="external-link">q</a></span><span class="op">(</span><span class="op">)</span> <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## packages, code, and data</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="http://www.bamlss.org/" class="external-link">"bamlss"</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: coda</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: colorspace</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: mgcv</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: nlme</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This is mgcv 1.8-40. For overview type 'help("mgcv-package")'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘bamlss’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:mgcv’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     smooth.construct</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/alexpghayes/distributions3" class="external-link">"distributions3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cars"</span>, package <span class="op">=</span> <span class="st">"datasets"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## fit heteroscedastic normal BAMLSS model</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dist</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="va">speed</span><span class="op">)</span>, <span class="va">sigma</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="va">speed</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://www.bamlss.org/reference/bamlss.html" class="external-link">bamlss</a></span><span class="op">(</span><span class="va">f</span>, data <span class="op">=</span> <span class="va">cars</span>, family <span class="op">=</span> <span class="st">"gaussian"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 442.5530 logPost -273.890 logLik -206.664 edf 11.081 eps 0.5053 iteration   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 426.3285 logPost -246.644 logLik -202.263 edf 8.7705 eps 0.0612 iteration   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 419.0112 logPost -223.437 logLik -201.867 edf 6.4931 eps 0.1609 iteration   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 418.8568 logPost -242.479 logLik -201.746 edf 6.5260 eps 0.0257 iteration   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 418.8495 logPost -247.716 logLik -201.663 edf 6.5838 eps 0.0027 iteration   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 418.8489 logPost -248.030 logLik -201.655 edf 6.5896 eps 0.0003 iteration   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 418.8488 logPost -248.086 logLik -201.654 edf 6.5907 eps 0.0001 iteration   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 418.8488 logPost -248.086 logLik -201.654 edf 6.5907 eps 0.0001 iteration   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> elapsed time:  0.44sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Starting the sampler...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |                    |   0%  3.45sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*                   |   5%  2.72sec  0.14sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |**                  |  10%  2.53sec  0.28sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |***                 |  15%  2.30sec  0.41sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |****                |  20%  2.24sec  0.56sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*****               |  25%  2.10sec  0.70sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |******              |  30%  1.96sec  0.84sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*******             |  35%  1.84sec  0.99sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |********            |  40%  1.71sec  1.14sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*********           |  45%  1.62sec  1.32sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |**********          |  50%  1.48sec  1.48sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |***********         |  55%  1.33sec  1.63sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |************        |  60%  1.19sec  1.79sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*************       |  65%  1.04sec  1.93sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |**************      |  70%  0.89sec  2.08sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |***************     |  75%  0.75sec  2.24sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |****************    |  80%  0.60sec  2.38sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*****************   |  85%  0.45sec  2.54sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |******************  |  90%  0.30sec  2.68sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |******************* |  95%  0.15sec  2.85sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |********************| 100%  0.00sec  3.02sec</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## obtain predicted distributions for three levels of speed</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "BAMLSS gaussian distribution (mu =  22.60, sigma = 10.61)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "BAMLSS gaussian distribution (mu =  59.36, sigma = 19.02)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "BAMLSS gaussian distribution (mu = 102.27, sigma = 38.74)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## obtain quantiles (works the same for any distribution object 'd' !!)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  22.59611  59.36410 102.26963</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">d</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span><span class="op">)</span>, elementwise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q_0.05     q_0.5    q_0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  5.141746  22.59611  40.05046</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 28.072768  59.36410  90.65543</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 38.550621 102.26963 165.98863</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">d</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span><span class="op">)</span>, elementwise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]   5.141746  59.364098 165.988629</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## visualization</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dist</span> <span class="op">~</span> <span class="va">speed</span>, data <span class="op">=</span> <span class="va">cars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">240</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nd</span><span class="op">$</span><span class="va">dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></span><span class="op">(</span><span class="va">m</span>, newdata <span class="op">=</span> <span class="va">nd</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nd</span><span class="op">$</span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">nd</span><span class="op">$</span><span class="va">dist</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/matplot.html" class="external-link">matplot</a></span><span class="op">(</span><span class="va">nd</span><span class="op">$</span><span class="va">speed</span>, <span class="va">nd</span><span class="op">$</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"l"</span>, lty <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="st">"slategray"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="prodist.bamlss-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## moments</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  22.59611  59.36410 102.26963</span>
<span class="r-in"><span><span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/variance.html" class="external-link">variance</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  112.6039  361.9041 1500.6639</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## simulate random numbers</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/random.html" class="external-link">random</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           r_1       r_2      r_3       r_4      r_5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 22.88307  42.76716 18.29586  54.45399 38.10047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 29.57215  99.87671 44.25336  60.84829 29.04048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 85.63005 145.12931 77.21325 132.16575 82.28013</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## density and distribution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/pdf.html" class="external-link">pdf</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">50</span> <span class="op">*</span> <span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            d_-100        d_-50          d_0        d_50        d_100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 3.902994e-31 2.582256e-12 0.0038950626 0.001339502 1.050233e-13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 1.210959e-17 1.396858e-09 0.0001611051 0.018578059 2.142031e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 1.237728e-08 4.547058e-06 0.0003157416 0.004144092 1.028071e-02</span>
<span class="r-in"><span><span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/cdf.html" class="external-link">cdf</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">50</span> <span class="op">*</span> <span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            p_-100        p_-50          p_0       p_50     p_100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 3.558603e-31 3.924734e-12 0.0166106525 0.99509523 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 2.712378e-17 4.493668e-09 0.0009026572 0.31127793 0.9836627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 8.877633e-08 4.234681e-05 0.0041452260 0.08862074 0.4766399</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## further diagnostics: graphical and scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="pithist.html">pithist</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="prodist.bamlss-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="qqrplot.html">qqrplot</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="prodist.bamlss-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="proscore.html">proscore</a></span><span class="op">(</span><span class="va">m</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LogLik"</span>, <span class="st">"CRPS"</span>, <span class="st">"MAE"</span>, <span class="st">"MSE"</span><span class="op">)</span>, aggregate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     LogLik     CRPS      MAE      MSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -4.04353 8.023004 11.21879 222.3045</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## note that proscore can replicate logLik() value</span></span></span>
<span class="r-in"><span><span class="fu"><a href="proscore.html">proscore</a></span><span class="op">(</span><span class="va">m</span>, aggregate <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   loglikelihood</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     -202.1765</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/logLik.html" class="external-link">logLik</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'log Lik.' -204.6246 (df=5.268455)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Poisson example</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"FIFA2018"</span>, package <span class="op">=</span> <span class="st">"distributions3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://www.bamlss.org/reference/bamlss.html" class="external-link">bamlss</a></span><span class="op">(</span><span class="va">goals</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="va">difference</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">FIFA2018</span>, family <span class="op">=</span> <span class="st">"poisson"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 364.2629 logPost -199.843 logLik -177.938 edf 4.0281 eps 5.5805 iteration   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 359.9880 logPost -188.485 logLik -177.169 edf 2.7419 eps 1.1530 iteration   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 359.9857 logPost -188.484 logLik -177.168 edf 2.7419 eps 0.0589 iteration   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 359.9857 logPost -188.484 logLik -177.168 edf 2.7419 eps 0.0001 iteration   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AICc 359.9857 logPost -188.484 logLik -177.168 edf 2.7419 eps 0.0001 iteration   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> elapsed time:  0.09sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Starting the sampler...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |                    |   0%  1.55sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*                   |   5%  1.41sec  0.07sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |**                  |  10%  1.28sec  0.14sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |***                 |  15%  1.29sec  0.23sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |****                |  20%  1.23sec  0.31sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*****               |  25%  1.16sec  0.39sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |******              |  30%  1.12sec  0.48sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*******             |  35%  1.04sec  0.56sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |********            |  40%  0.95sec  0.63sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*********           |  45%  0.88sec  0.72sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |**********          |  50%  0.80sec  0.80sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |***********         |  55%  0.72sec  0.88sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |************        |  60%  0.64sec  0.96sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*************       |  65%  0.56sec  1.05sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |**************      |  70%  0.48sec  1.12sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |***************     |  75%  0.40sec  1.20sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |****************    |  80%  0.32sec  1.30sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |*****************   |  85%  0.24sec  1.38sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |******************  |  90%  0.16sec  1.46sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |******************* |  95%  0.08sec  1.54sec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |********************| 100%  0.00sec  1.62sec</span>
<span class="r-in"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://alexpghayes.github.io/distributions3/reference/prodist.html" class="external-link">prodist</a></span><span class="op">(</span><span class="va">m2</span>, newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>difference <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">d2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "BAMLSS poisson distribution (lambda = 1.236)"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">d2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 1 3</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Achim Zeileis, Moritz N. Lang, Reto Stauffer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

