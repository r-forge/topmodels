---
title: "Summary Implementation"
author: "Moritz Lang, Achim Zeileis"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
bibliography: ref.bib
vignette: >
  %\VignetteIndexEntry{Graphical Model Assessment under Different Model Misspecifications}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteDepends{topmodels,crch,MASS,rmutil,sn}
  %\VignetteKeywords{FIXME}
  %\VignettePackage{topmodels}
---

```{css zoom-lib-src, echo = FALSE}
script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"
```

```{js zoom-jquery, echo = FALSE}
 $(document).ready(function() {
    $('body').prepend('<div class=\"zoomDiv\"><img src=\"\" class=\"zoomImg\"></div>');
    // onClick function for all plots (img's)
    $('img:not(.zoomImg)').click(function() {
      $('.zoomImg').attr('src', $(this).attr('src')).css({width: '100%'});
      $('.zoomDiv').css({opacity: '1', width: 'auto', border: '1px solid white', borderRadius: '5px', position: 'fixed', top: '50%', left: '50%', marginRight: '-50%', transform: 'translate(-50%, -50%)', boxShadow: '0px 0px 50px #888888', zIndex: '50', overflow: 'auto', maxHeight: '100%'});
    });
    // onClick function for zoomImg
    $('img.zoomImg').click(function() {
      $('.zoomDiv').css({opacity: '0', width: '0%'}); 
    });
  });
```

```{r preliminaries, echo = FALSE, message = FALSE}
library("topmodels")
options(digits = 4)
knitr::opts_chunk$set(fig.aling = "center")

## create folder for graphics if does not exist
dir.create("figures", showWarnings = FALSE)
```

## Methods

method | computation arguments | plotting arguments | output
--- | --- | --- | ---
`rootogram()` | `object`, `newdata`, `plot`, `class`, `response_type`, `breaks`, `width` | `style`<sup>[1](#myfootnote1)</sup>, `scale`<sup>[1](#myfootnote1)</sup>, `fitted`<sup>[1](#myfootnote1)</sup>, `ref`<sup>[1](#myfootnote1)</sup>, `xlab`<sup>[1](#myfootnote1)</sup>, `ylab`<sup>[1](#myfootnote1)</sup>, `main`<sup>[1](#myfootnote1)</sup>, `...` | `observed`, `expected`, `mid`, `width`
`pithist()` | `object`, `newdata`, `plot`, `class`, `trafo`<sup>[1](#myfootnote2)</sup>, `breaks`, `type`<sup>[1](#myfootnote1)</sup>, `nsim`, `delta`, `simint`<sup>[1,2](#myfootnote2)</sup>, `simint_level`, `simint_nrep` | `simint`<sup>[1,2](#myfootnote2)</sup>, `style`<sup>[1](#myfootnote1)</sup>, `freq`<sup>[1](#myfootnote1)</sup>, `confint`<sup>[1](#myfootnote1)</sup>, `ref`<sup>[1](#myfootnote1)</sup>, `xlab`<sup>[1](#myfootnote1)</sup>, `ylab`<sup>[1](#myfootnote1)</sup>, `main`<sup>[1](#myfootnote1)</sup>, `...` | `observed`, `mid`, `width`, `simint_lwr`, `simint_upr`
`qqrplot()` | `object`, `newdata`, `plot`, `class`, `detrend`<sup>[1](#myfootnote1)</sup>, `trafo`<sup>[1](#myfootnote2)</sup>, `nsim`, `delta`, `simint`<sup>[1,2](#myfootnote2)</sup>, `simint_level`, `simint_nrep`, `simint_seed` | `simint`<sup>[1,2](#myfootnote2)</sup>, `confint`<sup>[1](#myfootnote1)</sup>, `single_graph`, `ref`<sup>[1](#myfootnote1)</sup>, `xlab`<sup>[1](#myfootnote1)</sup>, `ylab`<sup>[1](#myfootnote1)</sup>, `main`<sup>[1](#myfootnote1)</sup>, `...` | `observed`, `expected`, `simint_observed_lwr`, `simint_observed_upr`, `simint_expected`

<a name="myfootnote1">1</a>: Setting is saved within `attributes` of the returned object.

<a name="myfootnote2">2</a>: Argument is used both for computation and plotting.

combine | vector of attribute values | single attribute value
--- | --- | ---
`c.rootogram()` | `fitted`, `ref`, `xlab`, `ylab`, `main` | `style`, `scale`
`c.pithist()` | `simint`, `confint`, `ref`, `xlab`, `ylab`, `main` | `type`, `trafo`<sup>[3](#myfootnote3)</sup>, `style`, `freq`
`c.qqrplot()` | `simint`, `confint`, `ref`, `xlab`, `ylab`, `main` | `detrend`, `trafo`<sup>[3](#myfootnote3)</sup>

<a name="myfootnote3">3</a>: Non-unique attribute values can't be comined.

summary | arguments | return values | extended return values
--- | --- | --- | ---
`summary.rootogram()` | `object`, `scale`, `style`, `extend` | `observed`, `expected`, `mid`, `width` | `ymin`, `ymax`
`summary.pithist()` | `object`, `freq`, `confint_level`, `confint_type`, `extend` | `observed`, `mid`, `width`, `simint_upr`, `simint_lwr` | `confint_lwr`, `confint_upr`, `ref`
`summary.qqrplot()` | `object`, `detrend` | `observed`, `expected`, `simint_observed_lwr`, `simint_observed_upr`, `simint_expected` | --

## Plotting with base R

plot | arguments (main) | arguments (add ons)
--- | --- | ---
`plot.rootogram()` | `x`, `style`, `scale`, `fitted`, `ref`, `xlim`, `ylim`, `xlab`, `ylab`, `main`, `axes`, `box`, `col`, `border`, `lwd`, `lty`, `alpha_min`, `...` | `fitted_col`, `fitted_pch`, `fitted_lty`, `fitted_lwd`, `ref_col`, `ref_lty`, `ref_lwd` 
`plot.pithist()` | `x`, `single_graph`, `style`, `freq`, `trafo`, `simint`, `confint`, `confint_level`, `confint_type`, `ref`, `xlim`, `ylim`, `xlab`, `ylab`, `main`, `axes`, `box`, `col`, `border`, `lwd`, `lty`, `alpha_min`, `...` | `simint_col`, `simint_lty`, `simint_lwd`, `confint_col`, `confint_lty`, `confint_lwd`, `ref_col`, `ref_lty`, `ref_lwd` 



## Plotting with ggplot2

autoplot | arguments (main) | arguments (add ons)
--- | --- | ---
`autoplot.rootogram()` | `object`, `style`, `scale`, `fitted`, `ref`, `xlim`, `ylim`, `xlab`, `ylab`, `main`, `legend`, `theme`, `colour`, `fill`, `size`, `linetype`, `alpha`, `...` | `fitted_colour`, `fitted_size`, `fitted_linetype`, `fitted_alpha`, `fitted_fill`, `fitted_stroke`, `fitted_shape`, `ref_colour`, `ref_size`, `ref_linetype`, `ref_alpha`
`autoplot.pithist()` | `object`, `single_graph`, `style`, `freq`, `simint`, `confint`, `confint_level`, `confint_type`, `ref`, `xlim`, `ylim`, `xlab`, `ylab`, `main`, `legend`, `theme`, `colour`, `fill`, `size`, `linetype`, `alpha` | `simint_colour`, `simint_size`, `simint_linetype`, `simint_alpha`, `confint_colour`, `confint_fill`, `confint_size`, `confint_linetype`, `confint_alpha`, `ref_colour`, `ref_size`, `ref_linetype`, `ref_alpha`

geom_<...> | inherits | geom aes | stat_<...> | stat aes 
--- | --- | --- | --- | ---
`geom_rootogram()` | `GeomRect` | `xmin`, `xmax`, `ymin`, `ymax` | `stat_rootogram()` | `observed`, `expected`, `mid`, `width`
`geom_rootogram_fitted()` | `GeomPath` | `x`, `y` | `stat_rootogram_fitted()` |  `expected`, `mid`
`geom_rootogram_ref()` | `GeomHline` | `yintercept = 0` | Identity | -- 
`geom_pithist()` with `style = "bar"` or `style = "line"` | `GeomTile` or `GeomStep` | `x`, `y` or `x`, `y`, `width`, `height` | `stat_pithist()` | `x`, `y`, `width`
`geom_pithist_ref()` | `GeomStep` | `x`, `y` | `stat_pithist_ref()` | `x`, `y`, `width`
`geom_pithist_confint()` with `style = "polygon"` or `style = "line"` | `GeomRect` or `GeomStep` | `xmin`, `xmax`, `ymin`, `ymax` or `x`, `ymin`, `ymax` | `stat_pithist_confint()` | `x`, `y`, `width`
`geom_pithist_simint()` | `GeomLinerange` | `x`, `ymin`, `ymax` | `stat_pithist_simint()` | `x`, `ymin`, `ymax` plus `y` and `width` required for `freq = FALSE`






## References

